<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="Kelvin's">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Kelvin's">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kelvin's">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> Kelvin's </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Kelvin's</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">just make a little change</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/11/python-notes-01/" itemprop="url">
                  Python 学习笔记-01
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-11T15:30:01+08:00" content="2016-09-11">
              2016-09-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Life is short, use Python.</p>
</blockquote>
<p>这几周每天都要到后台看直播的数据，后台的关键数据只有图表，没有原始数据可以导出，有时候想做个分析，只能自己手动将图表上的数据点录入 Excel 后再处理，相当麻烦。提需求去优化一下的话当然最好，但就目前来说优先级又不是那么的高，毕竟手工还是可以处理一下的……</p>
<p>然而如果每天将时间浪费在这上面，又的确是很浪费生命。没什么是一个 Geek 解决不了的，如果有，那就证明不够 Geek。于是果断利用上下班路上的时间（那来回的三个小时终于不用浪费了！），恶补了一下 Python，没想到还挺好玩的，真是居家旅行的必备神器。</p>
<hr>
<p>笔记如下：</p>
<h3 id="安装-Python"><a href="#安装-Python" class="headerlink" title="安装 Python"></a>安装 Python</h3><p>安装的话就太简单了，Mac 本身自带了 Python 2，什么都不用装直接就能用了。当然我还是建议使用 Py3 的，Py2 的中文处理体验实在是太酸爽了……Py3 的话，到官网上下载一个来装就可以了。两个甚至 N 个不同版本的 Python 在一台机上的兼容是完全没有问题的，网上会有很多教程教你如何切换版本。</p>
<p>我直接装了最新的 Python 3.5.2，别的什么都没有动，当我需求跑 Py2 或 Py3 的脚本时，分别输入不同的命令就可以了（反正我直接用 Py3，也就多输入一个“3”而已）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">python py2-script.py</div><div class="line"></div><div class="line">python3 py3-script.py</div></pre></td></tr></table></figure>
<p>包的管理也是相互独立的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pip install package-name</div><div class="line"></div><div class="line">pip3 install package-name</div></pre></td></tr></table></figure>
<p>可以考虑安装一个虚拟的环境，利用 virtualenv 包来虚拟不同版本的 Py，并且包也是独立的，不会影响到系统里真正的 Py 包。但是在虚拟环境里用 IPython + matplotlib 来画图的话，图会出不来。网上查了好多资料，应该是 plt 用来绘图的 backend 设置的问题，有兴趣的可以尝试解决一下。我直接在系统里用的 IPython，并没有遇到这样的问题（其实是我试过了解决不了……）。</p>
<h3 id="IPython"><a href="#IPython" class="headerlink" title="IPython"></a>IPython</h3><p>IPython 其实就是一个高级版的 Py shell，尤其是配合 pandas 用来处理数据的话，体验不能更爽了。</p>
<p>安装也是非常简单：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip3 install ipython</div></pre></td></tr></table></figure>
<p>运行的话直接 ipython3 就可以了，当然也可以带上参数，更方便处理数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ipython3 --pylab</div></pre></td></tr></table></figure>
<p>如果是使用 Py2 的话，把“3”去掉就可以了。</p>
<h3 id="requests-包——模拟登录并请求数据"><a href="#requests-包——模拟登录并请求数据" class="headerlink" title="requests 包——模拟登录并请求数据"></a>requests 包——模拟登录并请求数据</h3><p>工具都准备好了之后就要开工了，打开 Chrome，正常登录后台，通过 Dev-Tools 能看到登录时请求的 URL 及提交的表单数据，假设请求的地址为：<code>http://login_url</code>，提交的表单为：</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">usr_name:</span> my_name</div><div class="line"><span class="symbol">pwd:</span> my_password</div></pre></td></tr></table></figure>
<p>登录后正常查看后台的数据，，比方说要查看9月1日的数据，假设我们的 URL 为：<code>http://data_url?begin=2016-09-01&amp;end=2016-09-01</code></p>
<p>洞悉了一切之后，就可以通过 requests 包写一个获取数据的脚本啦：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 导入 requests 包</span></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line"><span class="comment"># 构造一个请求数据的表单，拼装需要提交的字段</span></div><div class="line">query = &#123;</div><div class="line">    <span class="string">'begin'</span>: begin_date,</div><div class="line">    <span class="string">'end'</span>: end_date</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment"># 开启一个 session，保存登录后的 cookies</span></div><div class="line">request = requests.Session()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">()</span>:</span></div><div class="line">    <span class="comment"># 构造登录时提交的表单（用户名+密码）</span></div><div class="line">    login_data = &#123;<span class="string">'usr_name'</span>: <span class="string">'my_name'</span>, <span class="string">'pwd'</span>: <span class="string">'my_password'</span>&#125;</div><div class="line">    <span class="comment"># 伪造一个 UA</span></div><div class="line">    headers = &#123;</div><div class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36'</span>,</div><div class="line">        <span class="string">'Host'</span>: <span class="string">'host_url'</span>,</div><div class="line">        <span class="string">'Origin'</span>: <span class="string">'origin_url'</span>,</div><div class="line">        <span class="string">'Referer'</span>: <span class="string">'referer_url'</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment"># POST 请求登录</span></div><div class="line">    request.post(<span class="string">'login_url'</span>, data = login_data, headers = headers)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_data</span><span class="params">(query = query)</span>:</span></div><div class="line">    <span class="comment"># GET 请求数据</span></div><div class="line">    response = request.get(<span class="string">'data_url'</span>, params = query)</div><div class="line">    <span class="comment"># 请求回来的数据是 JSON 格式，将它转成 dict 返回</span></div><div class="line">    <span class="keyword">return</span> response.json()</div></pre></td></tr></table></figure>
<p>简直不能更简单了，短短几行代码就完成了模拟登录和请求数据的工作，接下来就可以把请求回来的数据处理并保存下来。</p>
<h3 id="pandas-包——处理数据"><a href="#pandas-包——处理数据" class="headerlink" title="pandas 包——处理数据"></a>pandas 包——处理数据</h3><p>在 IPython 中，可以对数据进行一个预处理，看看拿回来的数据长什么样子，再将处理的命令写成脚本方便以后执行。</p>
<p>拿回来的数据，假设是长下面这个样子的：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  'id': [1001,1002,1003,1004],</div><div class="line">  'play': [10086,10010,23333,10101],</div><div class="line">  'comment': [2048,1024,2468,4399],</div><div class="line">  'duration': [120,163,126,60]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过对比页面上的数据可以知道，<code>id</code>、<code>play</code>、<code>comment</code>、<code>duration</code> 分别是 <code>节目 ID</code>、<code>播放量</code>、<code>评论量</code>、<code>时长</code> 的意思（假设有这几个数据），我们就可以利用 pandas 包来简单处理一下这些数据：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 导入 pandas 包</span></div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame</div><div class="line"><span class="comment"># 假设上面模拟登录的脚本保存为相同目录下的 get_data.py，将其导入</span></div><div class="line"><span class="keyword">import</span> get_data</div><div class="line"></div><div class="line"><span class="comment"># 换一个能“看懂”的表头</span></div><div class="line">headers = &#123;</div><div class="line">    <span class="string">'id'</span>: <span class="string">'节目 ID'</span>,</div><div class="line">    <span class="string">'play'</span>: <span class="string">'播放'</span>,</div><div class="line">    <span class="string">'comment'</span>: <span class="string">'评论'</span>,</div><div class="line">    <span class="string">'duration'</span>: <span class="string">'时长'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">clean_data</span><span class="params">(data)</span>:</span></div><div class="line">    <span class="comment">#  直接将 dict 转成 DataFrame</span></div><div class="line">    df = DataFrame(data)</div><div class="line">    <span class="comment"># 换个表头再返回啊</span></div><div class="line">    <span class="keyword">return</span> df.rename(columns = headers)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    <span class="comment"># 模拟登录</span></div><div class="line">    get_data.login()</div><div class="line">    <span class="comment"># 拿数据，存在 raw_data</span></div><div class="line">    raw_data = get_data.get_data()</div><div class="line">    <span class="comment"># 通过 clean_data() 处理数据</span></div><div class="line">    live_data = clean_data(raw_data)</div><div class="line">    <span class="comment"># 保存成 CSV 和 EXCEL 文件</span></div><div class="line">    live_data.to_csv(<span class="string">'live_data.csv'</span>, index = <span class="keyword">False</span>, header = <span class="keyword">True</span>)</div><div class="line">    live_data.to_excel(<span class="string">'live_data.xlsx'</span>, index = <span class="keyword">False</span>, header = <span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<p>将脚本存成 <code>main.py</code> 后，我们在 IPython 中运行一下：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">run main.py</div><div class="line">live_data</div></pre></td></tr></table></figure>
<p>就能看到处理好的数据啦：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">        节目 ID         播放        评论        时长</div><div class="line"><span class="number">0</span>       <span class="number">1001</span>        <span class="number">10086</span>       <span class="number">2048</span>        <span class="number">120</span></div><div class="line"><span class="number">1</span>       <span class="number">1002</span>        <span class="number">10010</span>       <span class="number">1024</span>        <span class="number">163</span></div><div class="line"><span class="number">2</span>       <span class="number">1003</span>        <span class="number">23333</span>       <span class="number">2468</span>        <span class="number">126</span></div><div class="line"><span class="number">3</span>       <span class="number">1004</span>        <span class="number">10101</span>       <span class="number">4399</span>        <span class="number">60</span></div></pre></td></tr></table></figure>
<p>同时也将数据保存在了本地，方便日后使用。</p>
<hr>
<p>先记到这里吧。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/29/lz-live-release-summary-ii/" itemprop="url">
                  荔枝直播小结（下）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-29T15:03:35+08:00" content="2016-08-29">
              2016-08-29
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>如果16年要评选年度十大关键词的话，“直播”应该能够毫无悬念地入选了吧。</p>
<p>2016年直播就像疯掉了一样，什么牛鬼蛇神都想来插一脚。直播的内容更是匪夷所思，直播吃饭的，睡觉的，发呆的，啪啪啪的。套路无非就是一言不合就露个沟，卖萌谢谢宝宝点亮么么哒。同质化不能太严重了，随便找两个名字里带有“直播”的 App 放一起的话，简直就是地狱难度的来找茬。</p>
<p>除了模式、界面、内容的同质化，“水分”的同质化也是没谁了，个个直播间都上万人在线，上个首页就能轻松过百万，全广州那么多的人在看一个傻逼吃饭？想想都觉得可笑。</p>
<p>然而外界一直在喧嚣，我们却一直不为所动。直到16年过去了整整一半，在某次周会例行的厂长问答环节上，他老人家突然被问到关于直播的看法，在侃了半天也没说明白是东是西之际，他提出，如果有谁想要负责直播这个项目，向他直接提出。大概的意思就是，这块肉想吃，但是煎还是炸，还真不好说。</p>
<p>于是乎6月的某天，我们开了一个简短的会议之后，新的直播项目正式开启。其实当时的我还是一脸懵逼的，只记得一个数字，XXX 万（敏感数据的话还是隐去吧）。</p>
<p>是的，我们的目标是一个月的时间，总收听要到 XXX 万。</p>
<h2 id="新直播规划"><a href="#新直播规划" class="headerlink" title="新直播规划"></a>新直播规划</h2><p>在项目确定要开启之后，我们进行了无数次的讨论。最初确定下来的方向是要在手机上做直播，与录音功能类似，降低设备配置的门槛，掏出手机就能直播，定位是“人人都是主播”的直播，全民直播。</p>
<p>然而手机端的直播有一个很大的问题，虽然是将用户的使用门槛降到了最低，但实现的成本却非常高，开发时间会拖得很长。此外，手机端的直播，内容质量没法很好地保证，对于一个新生事物来说，并非是一件好事。后来的一次会议上我们彻底地推翻了先做手机直播的策略，改为在电脑端使用传统的推流软件进行直播。一是使开发成本大大降低，在时间上争取到了更大的优势；二是更方便专业主播使用，保证初期种子内容的质量，在直播内容的制作上起到一个模范的作用。</p>
<p>在第一期版本的功能规划上，我们吸取了旧直播的失败经验，将互动功能列为不可砍掉的功能，还有如下几个功能点：</p>
<ol>
<li>推流软件：<br>我们用的是开源的 OBS，桌面端比较成熟且稳定，只要把推上来的流推给用户就可以了，开发难度小。</li>
<li>NJ 直播后台：<br>给主播使用的开始直播，查看实时评论的后台。</li>
<li>直播运营模块：<br>方便运营配置在各种入口的直播入口模块。</li>
<li>客户端直播收听：<br>基础的收听功能，同样使用了第三方库来实现，节省时间（但在后面发现这里的坑实在是太多）。</li>
<li>客户端直播评论：<br>核心功能，直播过程中用户能够发送评论，实时与主播及其他听众互动。</li>
<li>分享页：<br>考虑到实现难度，一期先不做页面的收听，只设计了一个死的分享页，引导下载 App 收听。</li>
</ol>
<p>而被我们砍掉的有如下的一堆功能：</p>
<ol>
<li>权限申请与审核</li>
<li>内容（音频、评论）审核</li>
<li>分享页的收听</li>
<li>评论（弹幕）的皮肤</li>
<li>道具的赠送</li>
<li>手机端的直播</li>
<li>直播转录成录播回放</li>
<li>语音连线</li>
</ol>
<p>由于一期我们采用的是“星探”制，由运营选取适合做直播的优质主播，直接联系开启权限，因此权限审核这块可以完全手动解决，毕竟初期量不会太大。而内容审核，由于有关部门的存在，这是绕不过去的巨坑，但在初期量不大的情况下，让运营的人去盯一下就基本可以了。</p>
<p>皮肤和道具方面，考虑到一期还是以验证模式可行性为主，因此这不是必须的功能。当然如果有收益的话，对于拉动主播是一个很不错的点，因此我们将这一块列为二期优先考虑的功能点。</p>
<p>手机端直播、转录以及语音连线都不是核心的功能，因此放到了更后的阶段再作考虑。</p>
<img src="/2016/08/29/lz-live-release-summary-ii/live-prototype.png" alt="最初的原型" title="最初的原型">
<p>此外还有一个直播的运营后台，只做了最不能缺的两个功能：</p>
<ol>
<li>开启权限</li>
<li>管理所有直播间</li>
</ol>
<p>其实第一期的直播，产品要做的就是以最快速度搭好平台，实现最核心的功能，尽早把工具做好给到运营，通过不同的运营手段去挖掘出适合直播的内容、模式，验证音频直播的需求是否存在，这样的模式是否能有爆点。</p>
<p>然而，迭代开展得依旧不太顺利……</p>
<h2 id="新直播一期上线"><a href="#新直播一期上线" class="headerlink" title="新直播一期上线"></a>新直播一期上线</h2><p>虽说直播团队正式成立了，但那时的我对这个项目还是不太有信心。毕竟旧的直播做得不成功，目前这块也只是一个边缘项目，还处于“试验”的阶段，资源的投入也不足。新直播一期的迭代从6月底开始，一直到8月8号 iOS 提交审核，8月15号安卓提包给各市场，将近两个月的时间，比预期的两周时间番了两番。</p>
<p>从动员会到上线，各时间节点上发生了如下事情：</p>
<ol>
<li>6月15日：<br>开了第一次动员会，对直播的雏形进行了讨论，调整为<em>优先做电脑端直播</em>，并且确定了评论的展示形式以聊天室取代横向的弹幕（这点非常重要，后面有时间会重点说）。</li>
<li>6月21日：<br>开了需求讲解会，把所有产品细节都定了下来，建 sprint 加 backlog，正式开启新直播的首个迭代。</li>
<li>6月22日：<br>开了协议讲解会，把所有技术实现的细节都定了下来，拆好了任务，正式开工。</li>
<li>7月8日：<br>测试环境部署好后台及 NJ 部分，开始第一波的接口测试。</li>
<li>7月15日：<br>测试环境有冲突，直播的测试被迫暂停。</li>
<li>7月22日：<br>直播服务部署到迭代环境，开始正式的测试，此时还有 push、banner 的跳转没有实现。</li>
<li>8月8日：<br>iOS 提交审核。</li>
<li>8月15日：<br>安卓提交各市场。</li>
</ol>
<p>这期间我们还经历了一次人员变动，原先负责 iOS 直播的技术离职，只剩下 Nic 一个人在同时开搞 iOS 和安卓。并且那时还有全厂的明星项目“虚拟道具”的迭代正在进行，还有广告的一些任务，许多直播需要的资源都没法到位。服务端的同学被抽走了，联调没法进行，甚至最后艰难地完成了开发提测了，连测试环境也不够用需要停止测试，才拖了这么长的时间。</p>
<img src="/2016/08/29/lz-live-release-summary-ii/first-live-test-min.png" alt="第一次公开直播测试" title="第一次公开直播测试">
<img src="/2016/08/29/lz-live-release-summary-ii/second-live-test-min.jpg" alt="第二次公开直播测试" title="第二次公开直播测试">
<p>8月的第二个周末，审核中即将正式发版之际，我们邀请了两个播客学院的主播，以及他们的粉丝，进行了两场小范围的新直播公开测试。虽然参与的用户不多，但整体的效果却令我们喜出望外。互动量非常大，音质、延迟等都比预想中的要好。</p>
<p>周日的第二次测试，更是令我们眼前一亮。主播采用了 QQ 连线多个嘉宾的方式，组织了一场直播辩论，流程顺畅，听众的互动率也非常的高。我在回广州的大巴上听完了整场直播，与听众、主播的实时互动使得参与的沉浸感非常强，还没聊上几句大巴就已经回到广州了。当时的我才松了口气，这东西有得做！</p>
<p>汇报了测试的数据，厂长还算满意。接下来的几天版本正式上线，我们的节目安排也紧紧跟上，确保每晚都有几档直播。初期收听的用户还不算多，我几乎每场直播都有进去收听，观察听众和主播的反应。我发现主播几乎都有固定的粉丝群，同一个主播每次直播基本上都是那批固定的粉丝在听，而且几乎次次都是他们，粘性非常强，互动率也非常高。这种现象正是我们之前一直在摸索想要实现的“社群”、“粉丝经济”的特点。录播节目上很难实现，时空间隔，互动非实时，这些都不利于社群的形成。而实时性，高互动率，高粘性，这些都是直播所呈现出来的价值，也是我们后续优化和深入挖掘的重点。</p>
<p>接下来的事情就顺利得多了，各种资源开始往直播上倾斜，重视程度也在日益提升。我们紧接着就开始了二期的开发，陆陆续续完善了后台、分享等一大波功能。</p>
<h2 id="新直播二期上线"><a href="#新直播二期上线" class="headerlink" title="新直播二期上线"></a>新直播二期上线</h2><p>自新直播功能上线以来，就基本处于每天加班到8点后的节奏，我们马不停蹄地开始了二期、三期的迭代。其实在最初版的规划中，二期和三期的内容就已经基本确定了。二期要上线赠送道具，在给主播创造收入的同时，拉动更多的主播来参与。三期的目标是继续加强互动，创造出更多新的互动玩法，增加直播的互动性。与此同时，还要抽空补全各种需要的后台功能，提高运营效率。基本上整个8月音频直播团队都处于满负荷运行的状态：</p>
<ol>
<li>8月5日：<br>直播分享页收听的第一次碰头会议，讨论实现的难度及方式。</li>
<li>8月9日：<br>讲解了直播分享页收听，以及直播数据后台的需求，开启分享页及直播数据后台的迭代。</li>
<li>8月10日：<br>讲解了直播二期（直播送荔枝）需求，把产品细节确定下来，并行开启了新的迭代。</li>
<li>8月11日：<br>上线一期落下的直播 push 功能，主播开播的时候可以给听众发通知。</li>
<li>8月16日：<br>开了直播三期的首次碰头会，讨论产品雏形。</li>
<li>8月17日：<br>讲解了直播三期的需求，确认了包括客户端、NJ、服务端的具体细节。</li>
<li>8月18日：<br>上线直播的数据后台，终于可以直接在后台查看相关数据，不用再去找技术跑数据了。</li>
<li>8月19日：<br>调整了直播列表的排序规则。<br>上线了分享页面上的收听功能。</li>
<li>8月20日：<br>修复了直播数据后台的定时任务 bug。</li>
<li>8月22日：<br>上线直播送荔枝的服务。<br>增加了一个临时的需求，要在 NJ 后台显示赠送荔枝的记录。<br>同时正式开启了直播三期的开发工作。</li>
<li>8月24日：<br>安卓的直播二期（送荔枝）发包到各大市场。</li>
<li>8月26日：<br>上线 NJ 送荔枝的记录显示。</li>
<li>8月27日：<br>修复了 NJ 送荔枝记录显示的一个 bug。</li>
<li>8月29日：<br>上线了直播数据后台查看赠送荔枝数据的功能。</li>
</ol>
<img src="/2016/08/29/lz-live-release-summary-ii/ios-live-second-release-min.png" alt="iOS 的直播送荔枝效果" title="iOS 的直播送荔枝效果">
<img src="/2016/08/29/lz-live-release-summary-ii/android-live-second-release-min.png" alt="安卓的直播送荔枝效果" title="安卓的直播送荔枝效果">
<p>直播送荔枝上线之后，我们观察到听众的付费意愿还是挺高的，并且很容易被煽动，只要有人带头送的话，后面很快就会跟一波。主播的积极性也被调动了起来，开始懂得去“撩”听众。</p>
<p>在模式验证可行后，接下来我们的重点就是怎样尽快拓展，尽量多铺直播的场次，同时调整直播的入口，将更多平台内的量带给主播，优化站外的带量渠道。运营上除了挖掘优质的内容，同时也要调动起听众与主播、听众间的互动。</p>
<p>目前新直播的三期正在努力开发中，这两天开始提测，目标是7号前上线。</p>
<p>啊，加油继续努力吧！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/27/lz-live-release-summary/" itemprop="url">
                  荔枝直播小结（上）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-27T11:24:36+08:00" content="2016-08-27">
              2016-08-27
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一周的忙碌终于过去了，周末想睡个懒觉又被快递吵醒，真是日了狗的……</p>
<p>好吧，其实我6点就醒了一次，开了电脑看了一下后台的数据，然后又关上电脑睡去。这些天基本都是这个状况，项目刚上线，生怕会出什么问题，担心昨天的数据太差，如果真的太差的话，这个刚诞生的“宠儿”也许就会被永久的抛弃了吧。</p>
<p>Anyway，总算是挤出了时间来给直播做个小结：</p>
<h2 id="旧直播规划"><a href="#旧直播规划" class="headerlink" title="旧直播规划"></a>旧直播规划</h2><p>其实直播从05年底就已经有在规划了，当时由于我们和湖南广电（就是传说中的芒果啦）那边有一些资源上的合作，就想在广州和湖南设置荔枝自己的直播室，邀请芒果台的一些大咖过来开直播的节目，以及一些芒果的节目，以音频直播的形式在荔枝播出。</p>
<p>这是最初我们对于直播的定位，是“荔枝”的直播，而不是“人人都是播客”的直播。</p>
<p>从提出要做直播，到迭代完成第一个版本推出去，其中还拖了不少的时间。在我们做完荔枝3.0（智能推荐）大改版之后，我们把直播的功能正式提上了日程。</p>
<p>由于我们是在自己的直播室里做直播，因此对主播端的功能能简即简，重点放在了听众端，也就是客户端的功能设计上。经过讨论我们确定了要做的主功能点有三个：</p>
<ol>
<li>直播模块：能够自由配置，方便运营，显示直播预告及节目信息</li>
<li>直播间的收听：基础功能，收听、暂停、重连等</li>
<li>直播间的互动：发送、查看弹幕</li>
</ol>
<p>然而当时正值16年农历新年前，节前大概还能开一到两个迭代，而上面三个直播的功能估计年前是完成不了的，因此只能砍开来做，先实现基本功能，让直播的整个流程至少能跑起来。多次讨论后我们决定，第一期先上线模块及基础的收听功能，互动这一块能赶就赶，不行的话等春节回来后再上。</p>
<p>更悲催的是，由于当时 iOS 还落后了安卓一个迭代，因此我们不得不把 iOS 的直播功能安排得更后，节前只争取上一个安卓的版本。与此同时，我们在广州的直播间也进行了装修及录音设备的购置，一切都按部就班地进行着。</p>
<h2 id="旧直播上线"><a href="#旧直播上线" class="headerlink" title="旧直播上线"></a>旧直播上线</h2><p>非常感谢各位码农的汗水，直播的第一版在一砍再砍之后，终于赶在春节前出来了，虽然只有安卓版，虽然只能听不能互动，但毕竟是出来了。</p>
<p>考虑到没有互动的直播缺乏爆点，而直播的节目是我们发起的，在第一版上线之后，我们并没有马上安排内容去运营，而是希望能等互动功能上了之后再推。因此我们可以说是“悄无声息”地上线直播的功能，没有任何的宣传，界面上也不可见，用户完全不知道有这个功能。</p>
<p>然而，接下来的迭代的确是把互动给加上了，但却并不是加在直播之上……</p>
<h2 id="互动转型"><a href="#互动转型" class="headerlink" title="互动转型"></a>互动转型</h2><p>春节放假前的15年荔枝年会上，厂长提出了两大目标：</p>
<ol>
<li>每日的弹幕数量达到一百万条</li>
<li>为一个主播创造一百万的收入</li>
</ol>
<p>以上两大目标的提出，标志着荔枝正式向互动及营收的方向转型。只有互动率提高了，才能有更大的营收可能。</p>
<p>于是我们在节前最后一个迭代上线了弹幕的功能，当然这里的弹幕并不是直播的弹幕，而是录播节目的弹幕，其实就是节目评论的另一种展现形式。运营上，也是往弹幕互动上面发力，成立了产品运营团队，负责策划各种功能、活动来刺激用户发送弹幕。</p>
<p>接着产品运营团队更是调整成了互动娱乐团队，除了继续激励用户的互动，同时也在营收方面开始发力。一期推出了弹幕皮肤的功能，但效果不太理想，用户的付费意欲并不高。二期又尝试在虚拟道具上下功能，推出了给主播赠送荔枝的功能。</p>
<p>如果说第一期弹幕皮肤是一次尝试，那么第二期的送荔枝就应该要吸取经验，谨慎多了才对。在规划阶段我们进行过多次讨论，当时争论的点是送荔枝究竟是给“什么”送？是送主播，还是送内容（节目）？Teddy（虚拟道具项目的 PM）始终坚持，这一功能的定位是“打赏”，是对于“主播”的打赏，是因为对于主播的认同，才产生了赠送的动机。然而我并不太认同这样的定位，对于这个需求、整个付费的场景，我持怀疑的态度。</p>
<p>除了定位，场景的问题，功能的设计上，我同样产生很大的怀疑，尤其是其中最大争议的一点：</p>
<ul>
<li><em>自己能给自己送荔枝？</em></li>
</ul>
<p>这一设定直接导致荔枝榜（以赠送荔枝的数量排名）沦为了各种微商、成功学刷量换曝光的最佳场所。最初希望通过设置榜单，来鼓励用户为自己喜爱的主播送荔枝打榜的构思，并没有得到实现。整个荔枝榜都是这些恶心的内容，并且荔枝榜还被放到了首页最显眼的位置，抢占了内容运营的位置，实在不见得是一件好事。我想不明白的是，既然设计了榜单的功能，肯定是需要考虑恶意刷榜的防范机制的，然而实际出来的却并没有，看不懂。</p>
<p>无论如果，只要是有人刷榜，我们就有得分成。先不管这种模式是否良性，毕竟也是有了一定的营收。因此往后所有的资源都往这一块业务上倾斜，优先级也调到了最优。而另一边，直播功能基本上已经被所有人遗忘，正式成为了“弃儿”。</p>
<p>哦对了，iOS 的直播功能拖到5月底才上线，即便是上齐了两个平台，整个直播功能也没有正式运营过。整个运营团队似乎从来就不把这当作一回事，只约了《坏蛋调频》来试水了一次，效果并不理想（当时只有安卓版本）。之后还做了几次商业性质（广告）的直播，像 TCL 手机的发布会什么的，效果就不说了。</p>
<p>以上就是对旧版直播的一个回顾，从它艰难的诞生，一直不受重视，到最终被彻底遗忘，甚至在用户看来，荔枝就像从来不曾有过直播这个功能一样。</p>
<p>下半部分的内容将会对新版直播前两期的迭代，同样进行一次回顾，留到有时间再码吧，大致内容如下：</p>
<ol>
<li>新直播规划</li>
<li>新直播一期上线</li>
<li>新直播运营</li>
<li>新直播二期上线</li>
<li>新直播的中期规划</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/23/i-am-back-again/" itemprop="url">
                  我又回来啦！
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-23T19:03:32+08:00" content="2016-08-23">
              2016-08-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一不小心把旧 blog 的源码删了，本地没有备份，也没有放 Github，唉……</p>
<p>不过还好吧，毕竟也断更了一年多了，碎碎念的东西也没有太大的保留价值。差不多每年都要重新弄一个 blog，真不知道现在这个能撑多久。</p>
<p>这几周基本都在加班中度过，好久没有过这样打了鸡血的感觉了，也许是之前过得真是太闲，一直都在做一些修修补补的工作，现在突然有了清晰的目标，大家一股劲的往前冲，感觉真好。</p>
<p>上周荔枝的直播功能终于上线了，拖了大半年的一些相关的功能也基本上补全了。这个项目由原来的“弃儿”，突然间成了厂长点名重点要做的“宠儿”，这中间经历过的种种，说多了都是泪。</p>
<p>依旧在加班中，只能抽空码几行字，等这周新迭代上线后吧，一定抽时间把直播这个项目好好的码下。</p>
<p>是的，我又回来啦！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Kelvin" />
          <p class="site-author-name" itemprop="name">Kelvin</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kelvin</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
